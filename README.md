irace + SUMO: Reliable simulation-optimization of traffic lights in a real-world city
=======================================================================

Javier Ferrer, Manuel López-Ibáñez, and Enrique Alba. **Reliable
simulation-optimization of traffic lights in a real-world city**. 
_Applied Soft Computing_, 78:697–711, 2019.
doi:[10.1016/j.asoc.2019.03.016](https://doi.org/10.1016/j.asoc.2019.03.016)
<br>
[[ bibtex ](https://iridia-ulb.github.io/references/index_bib.html#FerLopAlb2019asoc)]


Software versions used in the paper:

 * irace 3.0
 * SUMO 0.22.0
 * Perl 5
 

Installation
-------------

 1. Install irace (>=3.0): https://cran.r-project.org/package=irace

 2. Install SUMO (>= 0.22.0): https://www.eclipse.org/sumo/
 
     **IMPORTANT**: The `sumo` executable must be in the PATH, otherwise
     `sumo-wrapper` will not find it!
 
 3. Compile sumo-wrapper:

        make all -C src/sumo-wrapper/code
        
 4. The files `./irace/target-runner-rel` and `./irace/target-runner-abs`
    require Perl 5.

 5. The setup is designed for GNU/Linux. It may be possible to make it work in
    Windows or OSX, but you may need to rewrite some of the scripts.
    
 
Execution
----------

Look at scenarios in `src/irace/`, choose one, for example
`scenario-abs-repjavier-first2new0confs10.txt`. Then run (removing `scenario-`): 

        $ run.sh abs-repjavier-first2new0confs10 2
  
This will create a directory `./execdir-2` with the results of irace.


Overview
--------


 1. `run.sh` will call both `./irace/target-runner-rel` and
 `./irace/target-runner-abs` using the traffic-light file instance defined in `run.sh` to create
 `./irace/parameters-rel.txt` and `./irace/parameters-abs.txt`. An example of
 traffic-light instance is
 `src/sumo-wrapper/instanceFiles/malagaChica.txt`. You can regenerate this file using:
```bash
    ./src/sumo-wrapper/code/genInstanceFile ./instances/malagaChica/ malagaChica 4200
```
  
 2. `run.sh` will call `irace` which calls either `./irace/target-runner-rel`
    or `./irace/target-runner-abs` (defined by the scenario
    `targetRunner`). Let's assume it is `./irace/target-runner-rel`.
    
 3. `./irace/target-runner-rel` will call
    `./src/sumo-wrapper/code/sumo-wrapper` which calls `sumo`
    
 4. `sumo` will use the files in `src/sumo-wrapper/instanceFiles/`
    `src/sumo-wrapper/instances/`. Please read `src/sumo-wrapper/README.txt`
    
 5. Instance files for `irace` are defined in `malagaChica-train.txt` and
    `malagaChica-test.txt`. The `*.rou.xml` files defined there are the routes
    of the cars and each file describes a traffic scenario.  As mentioned in
    the paper, they were generated by Daniel Stolfi from sensor data and using
    the Flow Generator Algorithm (FGA) [27].  They are specific to a network
    file and cannot be re-used for a different network.
    
    
    
    
 
